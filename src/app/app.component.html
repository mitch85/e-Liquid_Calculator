<div class="flex flex-col p-5 h-screen">
  <div class="flex flex-col rounded-md border-2 border-stone-700 w-full p-4">
    <h2 class="mb-2">Rezept Name / Bezeichnung</h2>
    <div class="flex">
      <input
        type="text"
        class="w-full bg-slate-300 rounded border border-stone-700"
      />
    </div>
  </div>
  <div class="flex">
    <div
      class="flex flex-row rounded-md border-2 border-stone-700 w-full p-4 justify-between items-center mt-2 mr-2"
    >
      <div>
        <h2 class="mb-2">Menge</h2>
        <div class="flex">
          <input
            type="number"
            class="w-16 bg-slate-300 rounded border border-stone-700"
          />
          <p class="ml-1">ml</p>
        </div>
      </div>
      <div>
        <h2 class="mb-2">Nikotonstärke</h2>
        <div class="flex">
          <input
            type="number"
            class="w-16 bg-slate-300 rounded border border-stone-700"
          />
          <p class="ml-1">mg</p>
        </div>
      </div>
      <div>
        <!-- <h2 class="mb-2">SOLL</h2> -->
        <div class="flex">
          <p class="mr-2">PG</p>
          <input
            type="number"
            class="w-16 bg-slate-300 rounded border border-stone-700"
            [(ngModel)]="pg1"
            (ngModelChange)="onPgChange1()"
            min="0"
            max="100"
          />
          <p class="ml-1">%</p>
        </div>

        <div class="flex mt-2">
          <p class="mr-2">VG</p>
          <input
            type="number"
            class="w-16 bg-slate-300 rounded border border-stone-700"
            [(ngModel)]="vg1"
            (ngModelChange)="onVgChange1()"
            min="0"
            max="100"
          />
          <p class="ml-1">%</p>
        </div>
      </div>
    </div>
    <div
      class="flex flex-col rounded-md border-2 border-stone-700 w-full p-4 mt-2"
    >
      <h1 class="font-bold">Nikotin</h1>
      <div class="flex flex-row justify-between items-center">
        <div>
          <h2 class="mb-2">Stärke</h2>
          <div class="flex">
            <input
              type="number"
              class="w-16 bg-slate-300 rounded border border-stone-700"
            />
            <p class="ml-1">mg</p>
          </div>
        </div>
        <div>
          <!-- <h2 class="mb-2">BASE</h2> -->
          <div class="flex">
            <p class="mr-2">PG</p>
            <input
              type="number"
              class="w-16 bg-slate-300 rounded border border-stone-700"
              [(ngModel)]="pg2"
              (ngModelChange)="onPgChange2()"
              min="0"
              max="100"
            />
            <p class="ml-1">%</p>
          </div>

          <div class="flex mt-2">
            <p class="mr-2">VG</p>
            <input
              type="number"
              class="w-16 bg-slate-300 rounded border border-stone-700"
              [(ngModel)]="vg2"
              (ngModelChange)="onVgChange2()"
              min="0"
              max="100"
            />
            <p class="ml-1">%</p>
          </div>
        </div>
      </div>
    </div>
  </div>
  <!-- <div
    class="flex flex-col rounded-md border-2 border-stone-700 w-full p-4 mt-2"
  >
    <h1 class="font-bold">PG / VG</h1>
    <div class="flex flex-row justify-between">
      <div>
        <h2 class="mb-2">SOLL</h2>
        <div class="flex">
          <p class="mr-2">PG</p>
          <input
            type="number"
            class="w-16 bg-slate-300 rounded border border-stone-700"
            [(ngModel)]="pg1"
            (ngModelChange)="onPgChange1()"
            min="0"
            max="100"
          />
          <p class="ml-1">%</p>
        </div>

        <div class="flex mt-2">
          <p class="mr-2">VG</p>
          <input
            type="number"
            class="w-16 bg-slate-300 rounded border border-stone-700"
            [(ngModel)]="vg1"
            (ngModelChange)="onVgChange1()"
            min="0"
            max="100"
          />
          <p class="ml-1">%</p>
        </div>
      </div>
      <div>
        <h2 class="mb-2">BASE</h2>
        <div class="flex">
          <p class="mr-2">PG</p>
          <input
            type="number"
            class="w-16 bg-slate-300 rounded border border-stone-700"
            [(ngModel)]="pg2"
            (ngModelChange)="onPgChange2()"
            min="0"
            max="100"
          />
          <p class="ml-1">%</p>
        </div>

        <div class="flex mt-2">
          <p class="mr-2">VG</p>
          <input
            type="number"
            class="w-16 bg-slate-300 rounded border border-stone-700"
            [(ngModel)]="vg2"
            (ngModelChange)="onVgChange2()"
            min="0"
            max="100"
          />
          <p class="ml-1">%</p>
        </div>
      </div>
    </div>
  </div> -->
  <div
    class="flex flex-col rounded-md border-2 border-stone-700 w-full p-4 mt-2"
  >
    <h1 class="font-bold">Zutaten</h1>
    <table class="border border-slate-700 rounded-md w-full">
      <thead>
        <tr class="text-left">
          <th class="w-3/6"></th>
          <th class="w-1/6">Menge in %</th>
          <th class="w-1/6">Menge in mg</th>
          <th class="w-1/6"></th>
        </tr>
      </thead>
      <tbody class="max-h-32 overflow-y-scroll scrollar_mma w-full">
        <tr *ngFor="let flavor of userFlavors; let i = index" class="w-full">
          <td class="w-3/6">
            <select
              *ngIf="
                (edit && i == userFlavors.length - 1) ||
                (!edit && itemToEdit == i)
              "
              [(ngModel)]="flavor.name"
              name="selectName{{ i }}"
              class="w-full"
            >
              <option [ngValue]="null" disabled selected>
                — bitte wählen —
              </option>
              <option *ngFor="let f of flavors; let y = index">
                {{ f }}
              </option>
            </select>
            <span
              class="w-full"
              *ngIf="
                (edit && i != userFlavors.length - 1) ||
                (!edit && itemToEdit != i)
              "
              >{{ flavor.name }}</span
            >
          </td>
          <td class="w-1/6">
            <input
              type="number"
              class="border border-slate-700 w-10"
              *ngIf="
                (edit && i == userFlavors.length - 1) ||
                (!edit && itemToEdit == i)
              "
              [(ngModel)]="flavor.percent"
              name="percentName{{ i }}"
            />
            <span
              *ngIf="
                (edit && i != userFlavors.length - 1) ||
                (!edit && itemToEdit != i)
              "
              >{{ flavor.percent }}</span
            >
          </td>
          <td class="w-1/6">
            <span>{{ flavor.mg }}</span>
          </td>
          <td class="w-1/6">
            <button
              class="bg-neutral-200 border border-slate-500 rounded px-2"
              *ngIf="!edit && itemToEdit == undefined"
              (click)="edititem(i)"
            >
              Edit
            </button>
          </td>
        </tr>
        <tr class="w-full">
          <td class="w-3/5">Nikotin</td>
          <td class="w-1/5"></td>
          <td class="w-1/5"></td>
        </tr>

        <tr class="w-full">
          <td class="w-3/5">PG</td>
          <td class="w-1/5"></td>
          <td class="w-1/5"></td>
        </tr>

        <tr class="w-full">
          <td class="w-3/5">VG</td>
          <td class="w-1/5"></td>
          <td class="w-1/5"></td>
        </tr>
      </tbody>
    </table>
    <div class="text-right mt-2">
      <button
        class="bg-neutral-200 border border-slate-500 rounded px-2"
        (click)="save()"
      >
        OK
      </button>
      <button
        class="bg-neutral-200 border border-slate-500 rounded px-2"
        (click)="addFlavor()"
      >
        +
      </button>
    </div>
  </div>

  <!-- <div
    class="flex flex-col rounded-md border-2 border-stone-700 w-full px-4 mt-2 h-full


    "
  >
    <h1 class="font-bold mb-2">Benötige Mengen</h1>

    <textarea class="border border-slate-500 rounded-md h-full"></textarea>
  </div> -->
  <div class="flex h-full">
    <div
      class="flex flex-col rounded-md border-2 border-stone-700 w-2/3 px-4 mt-2 h-full mr-2"
    >
      <h1 class="font-bold mb-2">Notizen</h1>

      <textarea class="border border-slate-500 rounded-md h-full"></textarea>
    </div>
    <div
      class="flex flex-col rounded-md border-2 border-stone-700 w-1/3 p-4 mt-2 h-full"
    >
      <h1 class="font-bold mb-2">Zusatzinformationen</h1>

      <div class="flex flex-row justify-between items-center">
        <div>
          <h2 class="mb-2">Herstellungsdateum</h2>
          <input
            type="date"
            class="w-full bg-slate-300 rounded border border-stone-700"
          />
        </div>
        <div>
          <h2 class="mb-2">Reifezeit</h2>
          <input
            type="text"
            class="w-14 bg-slate-300 rounded border border-stone-700"
          />
        </div>
      </div>
    </div>
  </div>
  <div class="flex flex-col w-full py-4 mt-2">
    <button
      class="bg-neutral-200 border border-slate-500 rounded px-2"
      (click)="saveReceipt()"
    >
      Speichern
    </button>
  </div>
</div>
